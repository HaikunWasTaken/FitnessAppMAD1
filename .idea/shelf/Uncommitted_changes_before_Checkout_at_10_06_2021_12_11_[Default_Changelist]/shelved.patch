Index: app/src/main/java/de/hdmstuttgart/fitnessappmad1/fragments/CountdownFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package de.hdmstuttgart.fitnessappmad1.fragments\r\n\r\nimport android.app.Notification\r\nimport android.app.PendingIntent\r\nimport android.content.Intent\r\nimport android.os.Bundle\r\nimport android.os.CountDownTimer\r\nimport android.view.View\r\nimport androidx.core.app.NotificationCompat\r\nimport androidx.core.app.NotificationManagerCompat\r\nimport androidx.fragment.app.Fragment\r\nimport de.hdmstuttgart.fitnessappmad1.R\r\nimport de.hdmstuttgart.fitnessappmad1.activity.ResultActivity\r\nimport kotlinx.android.synthetic.main.fragment_countdown.*\r\n\r\nclass CountdownFragment : Fragment(R.layout.fragment_countdown) {\r\n\r\n    private var isPaused = false\r\n    private var millisInFuture: Long = 6000\r\n\r\n    val CHANNEL_ID = \"channelID\"\r\n    val NOTIFICATION_ID = 0\r\n    lateinit var notification: Notification\r\n    lateinit var notificationManager: NotificationManagerCompat\r\n\r\n\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n\r\n        timer.start()\r\n\r\n        btnStartStop.setOnClickListener {\r\n            notificationManager.notify(NOTIFICATION_ID, notification)\r\n            if (!isPaused) {\r\n                isPaused = true\r\n            } else {\r\n                isPaused = false\r\n                timer.start()\r\n            }\r\n        }\r\n\r\n        tvNext.setOnClickListener {\r\n            millisInFuture = 2312312\r\n            println(millisInFuture)\r\n            timer.cancel()\r\n            timer.start()\r\n            tvExercise.text = \"Liegestuetzen\"\r\n        }\r\n\r\n        val intent = Intent(requireContext(), ResultActivity::class.java).apply {\r\n            flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK\r\n        }\r\n        val pendingIntent: PendingIntent = PendingIntent.getActivity(requireContext(), 0, intent, 0)\r\n\r\n        notification = NotificationCompat.Builder(requireContext(), CHANNEL_ID)\r\n            .setSmallIcon(R.drawable.ic_baseline_timer_24)\r\n            .setContentTitle(\"Time over\")\r\n            .setContentText(\"sdsddssdds\")\r\n            .setContentIntent(pendingIntent)\r\n            .build()\r\n\r\n        notificationManager = NotificationManagerCompat.from(requireContext())\r\n    }\r\n\r\n    private val timer = object : CountDownTimer(millisInFuture, 1000) {\r\n        override fun onTick(millisUntilFinished: Long) {\r\n            val timeRemaining = millisUntilFinished / 1000\r\n            if (isPaused) {\r\n                tvCountdown.text = timeRemaining.toString()\r\n                pbCountdown.progress = timeRemaining.toInt()\r\n                millisInFuture = timeRemaining\r\n                cancel()\r\n            } else {\r\n                tvCountdown.text = timeRemaining.toString()\r\n                pbCountdown.progress = timeRemaining.toInt()\r\n            }\r\n        }\r\n        override fun onFinish() {\r\n            tvCountdown.text = \"done!\"\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/de/hdmstuttgart/fitnessappmad1/fragments/CountdownFragment.kt	(revision f8eb860283d244321c98c6805229d64eb508f887)
+++ app/src/main/java/de/hdmstuttgart/fitnessappmad1/fragments/CountdownFragment.kt	(date 1623319868668)
@@ -30,7 +30,6 @@
         timer.start()
 
         btnStartStop.setOnClickListener {
-            notificationManager.notify(NOTIFICATION_ID, notification)
             if (!isPaused) {
                 isPaused = true
             } else {
